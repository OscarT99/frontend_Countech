<div class="grid">
  <div class="col-12">
    <div class="card">
      <p-toast></p-toast>
      <p-toolbar styleClass="mb-4">
          <ng-template pTemplate="left">
              <div>
                <p-button label="Registrar empleado" icon="pi pi-plus" (click)="showCreateDialog()"></p-button>                        
              </div>
          </ng-template>

          <ng-template pTemplate="right">
          </ng-template>
      </p-toolbar>

      <p-table #dt [value]="listEmpleados" dataKey="id" [tableStyle]="{'min-width': '60rem'}" responsiveLayout="scroll" [rows]="10" [globalFilterFields]="['nombre','estado']" [paginator]="true" [rowsPerPageOptions]="[5,10,15]" [showCurrentPageReport]="true" currentPageReportTemplate="Mostrando {first} de {last} de {totalRecords} vistas" [rowHover]="true">
        <ng-template pTemplate="caption">
          <div class="flex flex-column md:flex-row md:justify-content-between md:align-items-center">
              <h5 class="m-0">Lista de empleados</h5>
              <span class="block mt-2 md:mt-0 p-input-icon-left">
                  <i class="pi pi-search"></i>
                  <input pInputText type="text" (input)="onGlobalFilter(dt, $event)" placeholder="Buscar..."  class="w-full sm:w-auto"/>
              </span>
          </div>
      </ng-template>
        <ng-template pTemplate="header">
          <tr>
            <!-- <th pSortableColumn="id">Id<p-sortIcon field="id"></p-sortIcon></th> -->
            <th style="width: 5rem"></th>
            <th>Tipo de identificación</th>
            <th>Número de identificación</th>
            <th pSortableColumn="nombre">Nombre<p-sortIcon field="nombre"></p-sortIcon></th>
            <!-- <th pSortableColumn="estado">Estado<p-sortIcon field="estado"></p-sortIcon></th> -->
            <th>Estado producción</th>
            <th></th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-empleado let-expanded="expanded">
          <tr>
            <td>
              <button type="button" pButton pRipple [pRowToggler]="empleado" class="p-button-text p-button-rounded p-button-plain" [icon]="expanded ? 'pi pi-chevron-down' : 'pi pi-chevron-right'"></button>
            </td>
            <td>{{ empleado.tipoIdentidad }}</td>
            <td>{{ empleado.numIdentidad }}</td>
            <td>{{ empleado.nombre }} {{ empleado.apellido }}</td>
            <!-- <td>
              <p-tag [value]="changeEstado(empleado.estado)" [severity]="getEstado(empleado.estado)"></p-tag>
            </td> -->
            <td><p-tag [value]="changeEstadoProd(empleado.estadoOcupado)" [severity]="getEstadoProd(empleado.estadoOcupado)"></p-tag></td>
            <td>
              <div class="flex gap-3 justify-content-center">
                <p-inputSwitch class="mt-3" [(ngModel)]="empleado.estado" (click)="confirm(empleado)" pTooltip="Cambiar estado"></p-inputSwitch>
                <p-button icon="pi pi-file" severity="secondary" [rounded]="true" pTooltip="Ver detalle" (click)="mostrarDetalleEmpleado(empleado.id)"></p-button>
                <p-button icon="pi pi-pencil" severity="warning" [rounded]="true" pTooltip="Editar" (click)="showEditDialog(empleado.id)"></p-button>
              </div>
            </td>
          </tr>
        </ng-template>

        <ng-template pTemplate="rowexpansion" let-empleado>
              <td colspan="10">
                      <p-table [value]="empleado.asignarProcesoEmpleados" dataKey="id">
                          <ng-template pTemplate="header">
                              <tr>
                                  <!-- <th>Numero</th> -->
                                  <th>Orden de trabajo</th>
                                  <th>Proceso</th>
                                  <th>Cantidad asignada</th>
                                  <th>Cantidad restante</th>
                                  <th>Cantidad hecha*</th>
                                  <th>Estado</th>
                              </tr>
                          </ng-template>
                          <ng-template pTemplate="body" let-proceso>
                              <tr>
                                <!-- <td>{{proceso.num}}</td> -->
                                <td>{{ proceso.ordenTrabajo }}</td>
                                <td>{{ proceso.procesoNom }}</td>
                                <td>{{ proceso.cantidadAsignada }}</td>
                                <td>{{ proceso.cantRestante }}</td>
                                <td>
                                  <form [formGroup]="formArray">
                                    <div [formGroup]="formArray">
                                      <ng-container formArrayName="data">
                                        <ng-container *ngFor="let i = index; let value of data.controls">
                                          <div [formGroupName]="i" *ngIf="i === proceso.num">
                                            <div class="formgrid col grid mt-2" style="display: flex;">
                                              <div style="margin-right: 4px;">
                                                <span class="p-float-label">
                                                  <input type="number" pInputText formControlName="cantidadHecha" (ngModelChange)="validateCantHecha(i, proceso.cantRestante)" />
                                                  <label for="cantidadHechas">Cantidad hecha</label>
                                                </span>
                                                <small>
                                                  <span *ngIf="value.get('cantidadHecha')?.hasError('min') && value.get('cantidadHecha')?.dirty" style="color: red;">
                                                    La cantidad debe ser mayor a 0.
                                                  </span>
                                                  <span *ngIf="value.get('cantidadHecha')?.hasError('required') && value.get('cantidadHecha')?.touched" style="color: red;">
                                                    La cantidad es <strong>requerida.</strong>
                                                  </span>
                                                  <span *ngIf="value.get('cantidadHecha')?.hasError('cantError') && value.get('cantidadHecha')?.touched" style="color: red;">
                                                    La cantidad no debe ser mayor a la <strong>cantidad restante</strong>.
                                                  </span>
                                                </small>
                                              </div>
                                              <div>
                                                <p-button type="submit" icon="pi pi-save" [rounded]="true" [text]="true" severity="success" pTooltip="Guardar" (click)="avanceData(proceso.id, i)"></p-button>
                                              </div>
                                            </div>
                                          </div>
                                        </ng-container>
                                      </ng-container>
                                    </div>
                                  </form>
                                  
                                  
                                  <!-- <form [formGroup]="formArray" formArrayName="formArray.controls" [formGroupName]="proceso.id">
                                    <div class="formgrid col grid mt-2 justify-content-end" style="display: flex; flex-direction: row; padding: 0;">
                                        <div style="flex: 1;">
                                            <span class="p-float-label">
                                                <input type="number" pInputText formControlName="cantidadHecha"/>
                                                <label for="cantidadHecha">Cantidad hecha*</label>
                                            </span>
                                            <small>
                                                <span *ngIf="formArray[proceso.num].get('cantidadHecha')?.hasError('required') && formArray[proceso.num].get('cantidadHecha')?.touched" style="color: red;">
                                                    La cantidad es <strong>requerida.</strong>
                                                </span>
                                                <span *ngIf="formArray[proceso.num].get('cantidadHecha')?.hasError('min') && formArray[proceso.num].get('cantidadHecha')?.touched" style="color: red;">
                                                    La cantidad debe ser mayor a 0.
                                                </span>
                                                <span *ngIf="formArray[proceso.num].get('cantidadHecha')?.hasError('cantError') && formArray[proceso.num].get('cantidadHecha')?.touched" style="color: red;">
                                                    La cantidad no debe ser mayor a la <strong>cantidad restante</strong>.
                                                </span>
                                            </small>
                                        </div>
                                        <div style="margin-left: 4px;">
                                            <p-button type="submit" icon="pi pi-save"  [rounded]="true" [text]="true" severity="success" pTooltip="Guardar"></p-button>        
                                        </div>
                                    </div>
                                </form> -->
                              </td>
                                <!-- <td>{{ proceso.estadoProcAsig }}</td> -->
                                <td ><p-tag [value]="changeEstadoProc(proceso.estadoProcAsig)" severity="warning"></p-tag></td>
                                <!-- <td>
                                    <p-tag [value]="order.status" [severity]="getStatusSeverity(order.status)"></p-tag>
                                </td> -->
                            </tr>
                          </ng-template>
                          <ng-template pTemplate="emptymessage">
                              <tr>
                                  <td colspan="6" class="text-center">No tiene procesos asignados pendientes</td>
                              </tr>
                          </ng-template>
                      </p-table>
                  
              </td>
      </ng-template>
      <ng-template pTemplate="emptymessage">
        <tr>
            <td colspan="6" class="text-center">No se encontraron empleados</td>
        </tr>
    </ng-template>
      </p-table>

  </div>
  </div>
</div>

<p-dialog header="Detalle del empleado" [(visible)]="infoDialog" [style]="{width: '400px'}" [modal]="true" class="p-fluid">
  <div *ngIf="detalleEmpleado">
    <div class="grid mt-1">
      <div class="col-6">
        <span style="font-weight: bold;">Tipo de identificación:</span>
        <div>
          <span>{{ detalleEmpleado.tipoIdentidad }}</span>
        </div>
      </div>
      <div class="col-6">
        <span style="font-weight: bold;">Número de identificación:</span>
        <div>
          <span>{{ detalleEmpleado.numIdentidad }}</span>
        </div>
      </div>
    </div>
    
   
    <div class="grid mt-1">
      <div class="col-10">
        <span style="font-weight: bold;">Nombre completo:</span>
        <div>
          <span>{{ detalleEmpleado.nombre }} {{ detalleEmpleado.apellido }}</span>
        </div>
      </div>
    </div>
    
    
    <div class="grid mt-1">
      <div class="col-6">
        <span style="font-weight: bold;">Correo electrónico:</span>
        <div>
          <span>{{ detalleEmpleado.correo }}</span>
        </div>
      </div>
      <div class="col-6">
        <span style="font-weight: bold;">Teléfono:</span>
        <div>
          <span>{{ detalleEmpleado.telefono }}</span>
        </div>
      </div>
    </div>
    

    <div class="grid mt-1">
      <div class="col-6">
        <span style="font-weight: bold;">Ciudad:</span>
        <div>
          <span>{{ detalleEmpleado.ciudad }}</span>
        </div>
      </div>
      <div class="col-6">
        <span style="font-weight: bold;">Dirección:</span>
        <div>
          <span>{{ detalleEmpleado.direccion }}</span>
        </div>
      </div>
    </div>
    
    <div class="grid mt-1">
      <div class="col-6">
        <span style="font-weight: bold;">Fecha de ingreso:</span>
        <div>
          <span>{{ detalleEmpleado.fechaIngreso }}</span>
        </div>
      </div>
    </div>

    <div class="grid mt-1">
      <div class="col-6">
        <span style="font-weight: bold;">Estado:</span>
        <div>
          <span>{{ detalleEmpleado.estado ? 'Activo' : 'Inactivo' }}</span>
        </div>
      </div>
      <div class="col-6">
        <span style="font-weight: bold;">Estado producción:</span>
        <div>
          <span>{{ detalleEmpleado.estadoOcupado ? 'Ocupado' : 'Libre'}}</span>
        </div>
      </div>
    </div>

  </div>
</p-dialog>


<p-dialog header="Editar empleado" [(visible)]="editDialog" [style]="{width: '450px'}" [modal]="true" class="p-fluid">
  <form [formGroup]="form" (ngSubmit)="addEmpleado()">

    <!-- <div class="field">
      <span class="p-float-label">
        <p-dropdown inputId="tipoIdentidad" [autoDisplayFirst]="false" [options]="listTipoIdentidad" formControlName="tipoIdentidad" placeholder="Seleccionar un tipo de identificación*"></p-dropdown>
        <label for="tipoIdentidad">Seleccionar un tipo de identificación*</label>
      </span> 
      <small *ngIf="form.get('tipoIdentidad')?.value == null && form.get('tipoIdentidad')?.touched" style="color: red;">
        El tipo de identificación es requerido</small>
    </div> -->

      <div class="formgrid grid">

      <div class="field col">
        <span class="p-float-label">
          <input [readOnly]="true" type="text" pInputText formControlName="tipoIdentidad">
          <label for="numIdentidad">Tipo de identidad</label>
        </span>
      </div>

      <div class="field col">
        <span class="p-float-label">
          <input [readOnly]="true" type="text" pInputText formControlName="numIdentidad">
          <label for="numIdentidad">Número de identificación</label>
      </span>
      </div>
        <!-- <small *ngIf="form.get('numIdentidad')?.touched && form.get('numIdentidad')?.hasError('required') || form.get('numIdentidad')?.hasError('required') && form.get('numIdentidad')?.dirty" style="color: red;">
          El número de identificación es requerido</small>
      <small *ngIf="form.get('numIdentidad')?.hasError('minlength') && form.get('numIdentidad')?.touched" style="color: red;">
          El número de identificación debe ser mínimo de 6 dígitos
      </small>
      <small *ngIf="form.get('numIdentidad')?.hasError('numeroExistente') && form.get('numIdentidad')?.touched" style="color: red;">
          El número de identificación está en uso</small>
      <small *ngIf="form.get('numIdentidad')?.dirty && form.get('numIdentidad')?.hasError('maxlength')" style="color: red;">
          Solo se permiten máximo 10 dígitos</small> -->
      </div>




  <div class="field">
    <span class="p-float-label">
      <input id="nombre" type="text" pInputText formControlName="nombre"/>
      <label for="nombre">Nombres*</label>
    </span>
    <!-- <small *ngIf="form.get('tipoIdentidad')?.value == null && form.get('tipoIdentidad')?.touched" style="color: red;">
      El tipo de identificación es requerido</small> -->

    <small *ngIf="form.get('nombre')?.hasError('required') && form.get('nombre')?.dirty || form.get('nombre')?.hasError('required') && form.get('nombre')?.touched" style="color: red;">
      El nombre es requerido</small>
  <small *ngIf="form.get('nombre')?.value !== '' && form.get('nombre')?.dirty && form.get('nombre')?.hasError('customTextRegExp')" style="color: red;">
      El nombre no es válido</small>
  <small *ngIf="form.get('nombre')?.touched && form.get('nombre')?.hasError('customLengthRegExp') && form.get('nombre')?.dirty && form.get('nombre')?.value !== ''" style="color: red;">
      El nombre no es válido</small>
  <small *ngIf="form.get('nombre')?.dirty && form.get('nombre')?.hasError('maxlength')" style="color: red;">
      El Nombre no puede tener más de 30 caracteres</small>
</div>

<div class="field">
  <span class="p-float-label">
    <input id="apellido" type="text" pInputText formControlName="apellido"/>
    <label for="apellido">Apellidos*</label>
  </span>
  <small *ngIf="form.get('apellido')?.hasError('required') && form.get('apellido')?.dirty || form.get('apellido')?.hasError('required') && form.get('apellido')?.touched" style="color: red;">
    El apellido es requerido</small>
<small *ngIf="form.get('apellido')?.value !== '' && form.get('apellido')?.dirty && form.get('apellido')?.hasError('customTextRegExp')" style="color: red;">
    El apellido no es válido</small>
<small *ngIf="form.get('apellido')?.touched && form.get('apellido')?.hasError('customLengthRegExp') && form.get('apellido')?.dirty && form.get('apellido')?.value !== ''" style="color: red;">
    El nombre no es válido</small>
<small *ngIf="form.get('apellido')?.dirty && form.get('apellido')?.hasError('maxlength')" style="color: red;">
    El nombre no puede tener más de 30 caracteres</small>
</div>

<div class="field">
    <span class="p-float-label">
      <input id="correo" type="text" pInputText formControlName="correo"/>
      <label for="correo">Correo electrónico*</label>
    </span> 
    <small *ngIf="form.get('nombre')?.hasError('email') && form.get('correo')?.dirty || form.get('correo')?.hasError('required') && form.get('correo')?.touched" style="color: red;">
      El correo es requerido</small>
  <small *ngIf="form.get('correo')?.value !== '' && form.get('correo')?.dirty && form.get('correo')?.hasError('customEmailRegExp')" style="color: red;">
      El correo no es válido</small>
  <small *ngIf="form.get('correo')?.dirty && form.get('correo')?.hasError('maxlength')" style="color: red;">
      El correo no puede tener más de 45 caracteres</small>
    </div> 

<div class="formgrid grid">
<div class="field col">
    <span class="p-float-label">
      <input type="text" id="telefono" pKeyFilter="int" pInputText formControlName="telefono"/>
      <label for="telefono">Teléfono*</label>
    </span>
    <small *ngIf="form.get('telefono')?.hasError('required') && form.get('telefono')?.touched || form.get('telefono')?.hasError('required') && form.get('telefono')?.dirty" style="color: red;">
      El teléfono es requerido</small>
      <small *ngIf="form.get('telefono')?.value !== '' && form.get('telefono')?.dirty && form.get('telefono')?.hasError('customNumberRegExp')" style="color: red;">
        El teléfono solo permite 10 dígitos</small>
  
</div>

<div class="field col">
    <span class="p-float-label">
      <input type="text" id="ciudad" pInputText formControlName="ciudad"/>
      <label for="ciudad">Ciudad*</label>
    </span>
    <small *ngIf="form.get('ciudad')?.hasError('required') && form.get('ciudad')?.dirty || form.get('ciudad')?.hasError('required') && form.get('ciudad')?.touched" style="color: red;">
      La ciudad es requerida</small>
  <small *ngIf="form.get('ciudad')?.value !== '' && form.get('ciudad')?.dirty && form.get('ciudad')?.hasError('customTextRegExp')" style="color: red;">
      La ciudad no es válida</small>
  <small *ngIf="form.get('ciudad')?.touched && form.get('ciudad')?.hasError('customLengthRegExp') && form.get('ciudad')?.dirty && form.get('ciudad')?.value !== ''" style="color: red;">
      La ciudad no es válida</small>
  <small *ngIf="form.get('ciudad')?.dirty && form.get('ciudad')?.hasError('maxlength')" style="color: red;">
      El ciudad no puede tener más de 30 caracteres</small>
</div>
</div>

<div class="field">
    <span class="p-float-label">
      <input type="text" id="direccion" pInputText formControlName="direccion"/>
      <label for="direccion">Dirección*</label>
    </span> 
    <small *ngIf="form.get('direccion')?.hasError('required') && form.get('direccion')?.dirty || form.get('direccion')?.hasError('required') && form.get('direccion')?.touched" style="color: red;">
      La dirección es requerida</small>
  <small *ngIf="form.get('direccion')?.dirty && form.get('direccion')?.hasError('maxlength')" style="color: red;">
      La dirección no puede tener más de 40 caracteres</small>
</div>

<div class="field">
  <span class="p-float-label">
      <p-calendar formControlName="fechaIngreso" [showIcon]="true" inputId="fechaIngreso" dateFormat="yy-mm-dd" [maxDate]="maxDate" [ngModel]="form.get('fechaIngreso')?.value"></p-calendar>
      <label for="fechaIngreso">Fecha de ingreso*</label>
  </span>
  <small *ngIf="form.get('fechaIngreso')?.hasError('required') && form.get('fechaIngreso')?.dirty || form.get('fechaIngreso')?.hasError('required') && form.get('fechaIngreso')?.touched" style="color: red;">
      La fecha de ingreso es requerida</small>
</div>

  <div class="formgrid col grid mt-2 justify-content-end">
    <p-button label="Cancelar" icon="pi pi-times" [text]="true" (click)="hideDialog()"></p-button>
    <p-button type="submit" label="Editar" icon="pi pi-check"></p-button>
  </div>

  </form>

</p-dialog>


<!-- Crear un empleado -->
<p-dialog header="Registrar un empleado" [(visible)]="createDialog" [style]="{width: '450px'}" [modal]="true" class="p-fluid">

  <form [formGroup]="form" (ngSubmit)="addEmpleado()">
    
    <div class="field">
      <span class="p-float-label">
          <p-dropdown [options]="listTipoIdentidad" formControlName="tipoIdentidad" [showClear]="true" placeholder="Seleccionar"></p-dropdown>
          <label for="tipoIdentidad">Tipo de identificación*</label>
      </span> 
      <small *ngIf="form.get('tipoIdentidad')?.value == null && form.get('tipoIdentidad')?.touched" style="color: red;">
          El tipo de identificación es requerido</small>
    </div>

  <div class="field">
      <span class="p-float-label">
          <input id="numIdentidad" type="text" pInputText pKeyFilter="int" formControlName="numIdentidad" (input)="validateNumIdentidad()"/>
          <label for="numIdentidad">Número de identificación*</label>
      </span>
      <small *ngIf="form.get('numIdentidad')?.touched && form.get('numIdentidad')?.hasError('required') || form.get('numIdentidad')?.hasError('required') && form.get('numIdentidad')?.dirty" style="color: red;">
          El número de identificación es requerido</small>
      <small *ngIf="form.get('numIdentidad')?.hasError('minlength') && form.get('numIdentidad')?.touched" style="color: red;">
          El número de identificación debe ser mínimo de 6 dígitos
      </small>
      <small *ngIf="form.get('numIdentidad')?.hasError('numeroExistente') && form.get('numIdentidad')?.touched" style="color: red;">
          El número de identificación está en uso</small>
      <small *ngIf="form.get('numIdentidad')?.dirty && form.get('numIdentidad')?.hasError('maxlength')" style="color: red;">
          Solo se permiten máximo 10 dígitos</small>
  </div> 
  
  <div class="field">
      <span class="p-float-label">
          <input id="nombre" type="text" pInputText formControlName="nombre"/>
          <label for="nombre">Nombres*</label>
      </span>
      <small *ngIf="form.get('nombre')?.hasError('required') && form.get('nombre')?.dirty || form.get('nombre')?.hasError('required') && form.get('nombre')?.touched" style="color: red;">
          El nombre es requerido</small>
      <small *ngIf="form.get('nombre')?.value !== '' && form.get('nombre')?.dirty && form.get('nombre')?.hasError('customTextRegExp')" style="color: red;">
          El nombre no es válido</small>
      <small *ngIf="form.get('nombre')?.touched && form.get('nombre')?.hasError('customLengthRegExp') && form.get('nombre')?.dirty && form.get('nombre')?.value !== ''" style="color: red;">
          El nombre no es válido</small>
      <small *ngIf="form.get('nombre')?.dirty && form.get('nombre')?.hasError('maxlength')" style="color: red;">
          El nombre no puede tener más de 30 caracteres</small>
  </div>
  
  <div class="field">
      <span class="p-float-label">
          <input id="apellido" type="text" pInputText formControlName="apellido"/>
          <label for="apellido">Apellidos*</label>
      </span>
      <small *ngIf="form.get('apellido')?.hasError('required') && form.get('apellido')?.dirty || form.get('apellido')?.hasError('required') && form.get('apellido')?.touched" style="color: red;">
          El apellido es requerido</small>
      <small *ngIf="form.get('apellido')?.value !== '' && form.get('apellido')?.dirty && form.get('apellido')?.hasError('customTextRegExp')" style="color: red;">
          El apellido no es válido</small>
      <small *ngIf="form.get('apellido')?.touched && form.get('apellido')?.hasError('customLengthRegExp') && form.get('apellido')?.dirty && form.get('apellido')?.value !== ''" style="color: red;">
          El apellido no es válido</small>
      <small *ngIf="form.get('apellido')?.dirty && form.get('apellido')?.hasError('maxlength')" style="color: red;">
          El apellido no puede tener más de 30 caracteres</small>
  </div>
  
  <div class="field">
      <span class="p-float-label">
          <input id="correo" type="text" pInputText formControlName="correo"/>
          <label for="correo">Correo electrónico*</label>
      </span> 
      <small *ngIf="form.get('correo')?.hasError('email') && form.get('correo')?.dirty || form.get('correo')?.hasError('required') && form.get('correo')?.touched" style="color: red;">
          El correo es requerido</small>
      <small *ngIf="form.get('correo')?.value !== '' && form.get('correo')?.dirty && form.get('correo')?.hasError('customEmailRegExp')" style="color: red;">
          El formato del correo no es válido</small>
      <small *ngIf="form.get('correo')?.dirty && form.get('correo')?.hasError('maxlength')" style="color: red;">
          El correo no puede tener más de 40 caracteres</small>
  </div> 
  
  <div class="formgrid grid">
  <div class="field col">
      <span class="p-float-label">
          <input type="text" id="telefono" pKeyFilter="int" pInputText formControlName="telefono"/>
          <label for="telefono">Teléfono*</label>
      </span>
      <small *ngIf="form.get('telefono')?.hasError('required') && form.get('telefono')?.touched || form.get('telefono')?.hasError('required') && form.get('telefono')?.dirty" style="color: red;">
          El teléfono es requerido</small>
      <small *ngIf="form.get('telefono')?.value !== '' && form.get('telefono')?.dirty && form.get('telefono')?.hasError('customNumberRegExp')" style="color: red;">
          El teléfono solo permite 10 dígitos</small>
      
  </div>
  
  <div class="field col">
      <span class="p-float-label">
          <input type="text" id="ciudad" pInputText formControlName="ciudad"/>
          <label for="ciudad">Ciudad*</label>
      </span>
      <small *ngIf="form.get('ciudad')?.hasError('required') && form.get('ciudad')?.dirty || form.get('ciudad')?.hasError('required') && form.get('ciudad')?.touched" style="color: red;">
          La ciudad es requerida</small>
      <small *ngIf="form.get('ciudad')?.value !== '' && form.get('ciudad')?.dirty && form.get('ciudad')?.hasError('customTextRegExp')" style="color: red;">
          La ciudad no es válida</small>
      <small *ngIf="form.get('ciudad')?.touched && form.get('ciudad')?.hasError('customLengthRegExp') && form.get('ciudad')?.dirty && form.get('ciudad')?.value !== ''" style="color: red;">
          La ciudad no es válida</small>
      <small *ngIf="form.get('ciudad')?.dirty && form.get('ciudad')?.hasError('maxlength')" style="color: red;">
          El ciudad no puede tener más de 30 caracteres</small>
  </div>
  </div>
  
  <div class="field">
      <span class="p-float-label">
          <input type="text" id="direccion" pInputText formControlName="direccion"/>
          <label for="direccion">Dirección*</label>
      </span> 
      <small *ngIf="form.get('direccion')?.hasError('required') && form.get('direccion')?.dirty || form.get('direccion')?.hasError('required') && form.get('direccion')?.touched" style="color: red;">
          La dirección es requerida</small>
      <small *ngIf="form.get('direccion')?.dirty && form.get('direccion')?.hasError('maxlength')" style="color: red;">
          La dirección no puede tener más de 40 caracteres</small>
  </div>
  
  <div class="field">
      <span class="p-float-label">
          <p-calendar class="inputs-pedido" formControlName="fechaIngreso" [showIcon]="true" inputId="fechaOrdenTrabajo" dateFormat="yy-mm-dd" [maxDate]="maxDate" ></p-calendar>
          <!-- <input (input)="fechaIngresoValidator()" type="text" id="fechaIngreso" pInputText formControlName="fechaIngreso" onfocus="(this.type='date')" onblur="if(!this.value) this.type='text' "> -->
          <label for="fechaIngreso">Fecha de ingreso*</label>
      </span>
      <small *ngIf="form.get('fechaIngreso')?.hasError('required') && form.get('fechaIngreso')?.dirty || form.get('fechaIngreso')?.hasError('required') && form.get('fechaIngreso')?.touched" style="color: red;">
          La fecha de ingreso es requerida</small>
  </div>

    <div class="formgrid col grid mt-2 justify-content-end">
      <p-button label="Cancelar" icon="pi pi-times" [text]="true" (click)="hideDialog()"></p-button>
      <p-button type="submit" label="Guadar" icon="pi pi-check"></p-button>
    </div>
  
  </form>

</p-dialog>

<p-toast></p-toast>
        <p-confirmDialog>
        </p-confirmDialog>

<p-dialog [(visible)]="avanceDialog" header="Info">

</p-dialog>
  <!-- {{empleadoSeleccionado | json}} -->
